<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konu AtlasÄ± | Akademik Takip Sistemi</title>
    <meta name="description" content="TYT ve AYT hazÄ±rlÄ±k sÃ¼recinde konularÄ± takip edebileceÄŸiniz profesyonel Ã§izelge oluÅŸturucu.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #F1F5F9; }

        #pdf-content {
            width: 210mm;
            min-height: 297mm;
            height: auto;
            padding: 20mm;
            margin: auto;
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        tr { page-break-inside: avoid; }
        .page-break { page-break-before: always; }
        
        .no-print-ui { transition: all 0.3s ease; }
        select, input, textarea { outline: none !important; border: 1px solid #E2E8F0; }
        select:focus, input:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }
        .tab-active { background-color: #1E293B; color: white; }
        
        .footer-space { flex-grow: 1; }
    </style>
</head>
<body class="py-10 px-4">

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <div class="lg:col-span-4 space-y-5 no-print-ui">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h2 class="text-xl font-bold text-slate-800 mb-4">ðŸ‘¤ Ã–ÄŸrenci Bilgisi</h2>
                <div class="space-y-3">
                    <input type="text" id="inStudent" oninput="updatePreview()" placeholder="Ã–ÄŸrenci AdÄ± SoyadÄ±" class="w-full rounded-xl p-3 bg-slate-50">
                    <input type="text" id="inInst" oninput="updatePreview()" placeholder="Kurum / Okul AdÄ±" class="w-full rounded-xl p-3 bg-slate-50">
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <div class="flex gap-2 mb-6 p-1 bg-slate-100 rounded-xl">
                    <button onclick="setExamType('TYT')" id="btnTYT" class="flex-1 py-2 rounded-lg font-bold text-sm tab-active transition-all">TYT</button>
                    <button onclick="setExamType('AYT')" id="btnAYT" class="flex-1 py-2 rounded-lg font-bold text-sm text-slate-500 transition-all">AYT</button>
                </div>

                <div class="space-y-4">
                    <select id="inDers" onchange="updateKonuOptions()" class="w-full rounded-xl p-3 bg-slate-50 cursor-pointer"></select>
                    <select id="inKonu" class="w-full rounded-xl p-3 bg-slate-50 cursor-pointer"></select>
                    <input type="text" id="inKaynak" placeholder="Kaynak / Ã–dev Notu" class="w-full rounded-xl p-3 bg-slate-50">
                    <button onclick="addRow()" class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 shadow-lg">Listeye Ekle</button>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <textarea id="inNote" oninput="updatePreview()" rows="3" class="w-full border rounded-xl p-3 bg-slate-50 mb-4" placeholder="Rehber Notu..."></textarea>
                <button onclick="downloadPDF()" class="w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-black flex items-center justify-center gap-3">
                    <span>ðŸ“¥</span> PDF OLARAK KAYDET
                </button>
            </div>
        </div>

        <div class="lg:col-span-8 overflow-x-auto pb-10">
            <div id="pdf-content">
                <div class="flex justify-between items-start border-b-4 border-slate-900 pb-6 mb-8">
                    <div>
                        <h1 class="text-4xl font-black text-slate-900 tracking-tighter">KONU ATLASI</h1>
                        <p class="text-slate-500 font-medium uppercase tracking-widest text-[10px] mt-1">Akademik Takip Ã‡izelgesi</p>
                    </div>
                    <div class="text-right space-y-1">
                        <p class="font-black text-xl text-slate-800" id="outStudent">________ ________</p>
                        <p class="text-sm font-semibold text-slate-500" id="outInst">________</p>
                        <p class="text-[10px] text-slate-400" id="outDate"></p>
                    </div>
                </div>

                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-slate-900 text-white">
                            <th class="p-3 text-left text-[9px] font-bold uppercase w-12 text-slate-400">SÄ±nav</th>
                            <th class="p-3 text-left text-[9px] font-bold uppercase w-28">Ders</th>
                            <th class="p-3 text-left text-[9px] font-bold uppercase">Konu</th>
                            <th class="p-3 text-left text-[9px] font-bold uppercase">Kaynak / Durum</th>
                            <th class="p-3 text-center text-[9px] font-bold uppercase w-8 no-print-item"></th>
                        </tr>
                    </thead>
                    <tbody id="outTable"></tbody>
                </table>

                <div class="mt-10">
                    <h3 class="text-slate-900 font-black text-[11px] uppercase tracking-widest border-l-4 border-blue-600 pl-2 mb-3">Rehberlik Notu</h3>
                    <div id="outNote" class="text-slate-700 text-sm leading-relaxed p-5 bg-slate-50 rounded-xl min-h-[100px] border border-slate-100 italic">
                        HenÃ¼z bir not eklenmedi.
                    </div>
                </div>

                <div class="footer-space"></div>
                
                <div class="mt-12 flex justify-between items-end border-t border-slate-200 pt-8">
                    <div class="text-[9px] text-slate-400 max-w-[280px]">
                        HazÄ±rlayan: <strong>Uzm. Psk. Dan. Ali AvÅŸaroÄŸlu</strong>
                    </div>
                    <div class="text-center">
                        <div class="font-bold text-slate-900 text-sm">Uzm. Psk. Dan. Ali AvÅŸaroÄŸlu</div>
                        <div class="text-[10px] text-slate-500">Rehberlik Servisi</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const ALL_DATA = {
            "TYT": {
                "TÃ¼rkÃ§e": ["SÃ¶zcÃ¼kte Anlam", "SÃ¶z Yorumu", "Deyim ve AtasÃ¶zÃ¼", "CÃ¼mlede Anlam", "Paragraf", "Paragrafta AnlatÄ±m Teknikleri", "Paragrafta DÃ¼ÅŸÃ¼nceyi GeliÅŸtirme YollarÄ±", "Paragrafta YapÄ±", "Paragrafta Konu-Ana DÃ¼ÅŸÃ¼nce", "Paragrafta YardÄ±mcÄ± DÃ¼ÅŸÃ¼nce", "Ses Bilgisi", "YazÄ±m KurallarÄ±", "Noktalama Ä°ÅŸaretleri", "SÃ¶zcÃ¼kte YapÄ±/Ekler", "SÃ¶zcÃ¼k TÃ¼rleri", "Ä°simler", "Zamirler", "SÄ±fatlar", "Zarflar", "Edat â€“ BaÄŸlaÃ§ â€“ Ãœnlem", "Fiiller", "Fiilde Anlam", "Ek Fiil", "Fiilimsi", "Fiilde Ã‡atÄ±", "SÃ¶zcÃ¼k GruplarÄ±", "CÃ¼mlenin Ã–geleri", "CÃ¼mle TÃ¼rleri", "AnlatÄ±m BozukluÄŸu"],
                "Matematik": ["Temel Kavramlar", "SayÄ± BasamaklarÄ±", "BÃ¶lme ve BÃ¶lÃ¼nebilme", "EBOB â€“ EKOK", "Rasyonel SayÄ±lar", "Basit EÅŸitsizlikler", "Mutlak DeÄŸer", "ÃœslÃ¼ SayÄ±lar", "KÃ¶klÃ¼ SayÄ±lar", "Ã‡arpanlara AyÄ±rma", "Oran OrantÄ±", "Denklem Ã‡Ã¶zme", "Problemler", "KÃ¼meler", "MantÄ±k", "Fonksiyonlar", "Polinomlar", "2.Dereceden Denklemler", "PermÃ¼tasyon ve Kombinasyon", "OlasÄ±lÄ±k", "Veri â€“ Ä°statistik"],
                "Geometri": ["Temel Kavramlar", "DoÄŸruda AÃ§Ä±lar", "ÃœÃ§gende AÃ§Ä±lar", "Ã–zel ÃœÃ§genler", "AÃ§Ä±ortay", "Kenarortay", "Benzerlik", "ÃœÃ§gende Alan", "Ã‡okgenler", "DÃ¶rtgenler", "Ã‡ember ve Daire", "Analitik Geometri", "KatÄ± Cisimler"],
                "Fizik": ["Fizik Bilimine GiriÅŸ", "Madde ve Ã–zellikleri", "BasÄ±nÃ§ ve KaldÄ±rma Kuvveti", "IsÄ± ve SÄ±caklÄ±k", "Hareket ve Kuvvet", "Enerji", "Elektrik", "Manyetizma", "Dalgalar", "Optik"],
                "Kimya": ["Kimya Bilimi", "Atom ve Periyodik Sistem", "TÃ¼rler ArasÄ± EtkileÅŸimler", "Maddenin Halleri", "KarÄ±ÅŸÄ±mlar", "Asit, Baz ve Tuz", "Kimya Her Yerde"],
                "Biyoloji": ["CanlÄ±larÄ±n Ortak Ã–zellikleri", "Temel BileÅŸenler", "HÃ¼cre", "SÄ±nÄ±flandÄ±rma", "BÃ¶lÃ¼nme ve Ãœreme", "KalÄ±tÄ±m", "Ekosistem"],
                "Tarih": ["Tarih ve Zaman", "Ä°lk Ã‡aÄŸlar", "TÃ¼rk DÃ¼nyasÄ±", "Ä°slam Tarihi", "SelÃ§uklu", "OsmanlÄ± Tarihi", "KurtuluÅŸ SavaÅŸÄ±", "Ä°nkÄ±lap Tarihi"],
                "CoÄŸrafya": ["DoÄŸa ve Ä°nsan", "DÃ¼nya'nÄ±n Åžekli", "Harita Bilgisi", "Ä°klim", "Yer Åžekilleri", "NÃ¼fus", "BÃ¶lgeler", "Afetler"]
            },
            "AYT": {
                "Matematik": ["Fonksiyonlar", "Polinomlar", "2.Dereceden Denklemler", "PermÃ¼tasyon-Kombinasyon", "Binom ve OlasÄ±lÄ±k", "KarmaÅŸÄ±k SayÄ±lar", "EÅŸitsizlikler", "Parabol", "Trigonometri", "Logaritma", "Diziler", "Limit", "TÃ¼rev", "Ä°ntegral"],
                "Fizik": ["VektÃ¶rler", "Tork ve Denge", "Basit Makineler", "Newton YasalarÄ±", "AtÄ±ÅŸlar", "Ä°tme ve Momentum", "Elektrik ve Manyetizma", "Ã‡embersel Hareket", "Harmonik Hareket", "Dalga MekaniÄŸi", "Modern Fizik"],
                "Kimya": ["Modern Atom Teorisi", "Gazlar", "Ã‡Ã¶zeltiler", "Enerji, HÄ±z, Denge", "Asit-Baz Dengesi", "Elektrokimya", "Organik Kimya"],
                "Biyoloji": ["Sistemler", "Genden Proteine", "Enerji DÃ¶nÃ¼ÅŸÃ¼mleri", "Bitki Biyolojisi", "CanlÄ±lar ve Ã‡evre"],
                "Edebiyat": ["Åžiir Bilgisi", "Edebi Sanatlar", "DÃ¶nemler (Halk, Divan, Tanzimat vb.)", "Cumhuriyet EdebiyatÄ±", "AkÄ±mlar"],
                "Tarih": ["SelÃ§uklu", "OsmanlÄ± Siyaseti", "Denge Stratejisi", "Milli MÃ¼cede", "DÃ¼nya SavaÅŸÄ±", "Ã‡aÄŸdaÅŸ TÃ¼rk Tarihi"],
                "CoÄŸrafya": ["Ekosistem", "NÃ¼fus PolitikalarÄ±", "TÃ¼rkiye Ekonomisi", "KÃ¼resel Ticaret", "Ã‡evre ve Toplum"]
            }
        };

        let currentExam = "TYT";
        let rows = [];

        function setExamType(type) {
            currentExam = type;
            document.getElementById('btnTYT').className = type === 'TYT' ? 'flex-1 py-2 rounded-lg font-bold text-sm tab-active' : 'flex-1 py-2 rounded-lg font-bold text-sm text-slate-500';
            document.getElementById('btnAYT').className = type === 'AYT' ? 'flex-1 py-2 rounded-lg font-bold text-sm tab-active' : 'flex-1 py-2 rounded-lg font-bold text-sm text-slate-500';
            updateDersOptions();
        }

        function updateDersOptions() {
            const dersSelect = document.getElementById('inDers');
            dersSelect.innerHTML = "";
            Object.keys(ALL_DATA[currentExam]).forEach(ders => {
                const opt = document.createElement('option');
                opt.value = ders; opt.innerText = ders;
                dersSelect.appendChild(opt);
            });
            updateKonuOptions();
        }

        function updateKonuOptions() {
            const ders = document.getElementById('inDers').value;
            const konuSelect = document.getElementById('inKonu');
            konuSelect.innerHTML = "";
            ALL_DATA[currentExam][ders].forEach(konu => {
                const opt = document.createElement('option');
                opt.value = konu; opt.innerText = konu;
                konuSelect.appendChild(opt);
            });
        }

        function addRow() {
            rows.push({
                id: Date.now(),
                exam: currentExam,
                ders: document.getElementById('inDers').value,
                konu: document.getElementById('inKonu').value,
                kaynak: document.getElementById('inKaynak').value || "-"
            });
            document.getElementById('inKaynak').value = "";
            updatePreview();
        }

        function deleteRow(id) {
            rows = rows.filter(r => r.id !== id);
            updatePreview();
        }

        function updatePreview() {
            document.getElementById('outStudent').innerText = document.getElementById('inStudent').value || "________ ________";
            document.getElementById('outInst').innerText = document.getElementById('inInst').value || "________";
            document.getElementById('outNote').innerText = document.getElementById('inNote').value || "HenÃ¼z bir not eklenmedi.";
            document.getElementById('outDate').innerText = "OluÅŸturma: " + new Date().toLocaleDateString('tr-TR');

            const table = document.getElementById('outTable');
            table.innerHTML = "";
            rows.forEach(r => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="p-3 text-[10px] font-black ${r.exam === 'TYT' ? 'text-blue-500' : 'text-purple-500'} uppercase">${r.exam}</td>
                    <td class="p-3 text-xs font-bold text-slate-800">${r.ders}</td>
                    <td class="p-3 text-xs text-slate-600">${r.konu}</td>
                    <td class="p-3 text-xs text-slate-400 italic">${r.kaynak}</td>
                    <td class="p-3 text-center no-print-item">
                        <button onclick="deleteRow(${r.id})" class="text-slate-300 hover:text-red-500">Ã—</button>
                    </td>
                `;
                table.appendChild(tr);
            });
        }

        function downloadPDF() {
            const student = document.getElementById('inStudent').value || "Ogrenci";
            const element = document.getElementById('pdf-content');
            const itemsToHide = document.querySelectorAll('.no-print-item');
            itemsToHide.forEach(el => el.style.opacity = '0');

            const opt = {
                margin: 0,
                filename: `Konu_Atlasi_${student}.pdf`,
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 2, useCORS: true, letterRendering: true, scrollY: 0 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                pagebreak: { mode: ['css', 'legacy'] } 
            };

            html2pdf().set(opt).from(element).save().then(() => {
                itemsToHide.forEach(el => el.style.opacity = '1');
            });
        }

        window.onload = () => { setExamType('TYT'); };
    </script>
</body>
</html>